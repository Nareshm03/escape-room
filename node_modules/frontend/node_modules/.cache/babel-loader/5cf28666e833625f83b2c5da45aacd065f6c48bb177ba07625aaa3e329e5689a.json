{"ast":null,"code":"var _jsxFileName = \"D:\\\\Escape room\\\\frontend\\\\src\\\\components\\\\TeamChat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TeamChat = ({\n  teamId,\n  stage\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    if (teamId && stage) {\n      fetchMessages();\n      const interval = setInterval(fetchMessages, 3000); // Poll every 3 seconds\n      return () => clearInterval(interval);\n    }\n  }, [teamId, stage]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const fetchMessages = async () => {\n    try {\n      const response = await api.get(`/chat/${teamId}/${stage}`);\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n    setLoading(true);\n    try {\n      await api.post(`/chat/${teamId}/${stage}`, {\n        message: newMessage\n      });\n      setNewMessage('');\n      fetchMessages();\n    } catch (error) {\n      console.error('Error sending message:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      border: '1px solid #ddd',\n      borderRadius: '8px',\n      height: '300px',\n      display: 'flex',\n      flexDirection: 'column',\n      backgroundColor: 'white'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '12px',\n        borderBottom: '1px solid #eee',\n        backgroundColor: '#f8f9fa',\n        fontWeight: 'bold'\n      },\n      children: [\"\\uD83D\\uDCAC Team Chat - Stage \", stage]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: '8px',\n        maxHeight: '200px'\n      },\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '8px',\n          padding: '6px 8px',\n          backgroundColor: '#f8f9fa',\n          borderRadius: '4px',\n          fontSize: '14px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          style: {\n            color: '#007bff'\n          },\n          children: [msg.user_name, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: '8px'\n          },\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '11px',\n            color: '#666',\n            marginTop: '2px'\n          },\n          children: new Date(msg.created_at).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      style: {\n        padding: '8px',\n        borderTop: '1px solid #eee',\n        display: 'flex',\n        gap: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newMessage,\n        onChange: e => setNewMessage(e.target.value),\n        placeholder: \"Type a message...\",\n        disabled: loading,\n        style: {\n          flex: 1,\n          padding: '6px 8px',\n          border: '1px solid #ddd',\n          borderRadius: '4px',\n          fontSize: '14px'\n        },\n        maxLength: \"500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading || !newMessage.trim(),\n        style: {\n          padding: '6px 12px',\n          backgroundColor: '#007bff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer',\n          fontSize: '14px'\n        },\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(TeamChat, \"QrINKm3h5iDz29VCX52yZH28Vis=\");\n_c = TeamChat;\nexport default TeamChat;\nvar _c;\n$RefreshReg$(_c, \"TeamChat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","api","jsxDEV","_jsxDEV","TeamChat","teamId","stage","_s","messages","setMessages","newMessage","setNewMessage","loading","setLoading","messagesEndRef","fetchMessages","interval","setInterval","clearInterval","scrollToBottom","response","get","data","error","console","sendMessage","e","preventDefault","trim","post","message","_messagesEndRef$curre","current","scrollIntoView","behavior","style","border","borderRadius","height","display","flexDirection","backgroundColor","children","padding","borderBottom","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","flex","overflowY","maxHeight","map","msg","index","marginBottom","fontSize","color","user_name","marginLeft","marginTop","Date","created_at","toLocaleTimeString","ref","onSubmit","borderTop","gap","type","value","onChange","target","placeholder","disabled","maxLength","cursor","_c","$RefreshReg$"],"sources":["D:/Escape room/frontend/src/components/TeamChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport api from '../services/api';\n\nconst TeamChat = ({ teamId, stage }) => {\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    if (teamId && stage) {\n      fetchMessages();\n      const interval = setInterval(fetchMessages, 3000); // Poll every 3 seconds\n      return () => clearInterval(interval);\n    }\n  }, [teamId, stage]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const fetchMessages = async () => {\n    try {\n      const response = await api.get(`/chat/${teamId}/${stage}`);\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n\n    setLoading(true);\n    try {\n      await api.post(`/chat/${teamId}/${stage}`, { message: newMessage });\n      setNewMessage('');\n      fetchMessages();\n    } catch (error) {\n      console.error('Error sending message:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  return (\n    <div style={{ \n      border: '1px solid #ddd', \n      borderRadius: '8px', \n      height: '300px', \n      display: 'flex', \n      flexDirection: 'column',\n      backgroundColor: 'white'\n    }}>\n      <div style={{ \n        padding: '12px', \n        borderBottom: '1px solid #eee', \n        backgroundColor: '#f8f9fa',\n        fontWeight: 'bold'\n      }}>\n        ðŸ’¬ Team Chat - Stage {stage}\n      </div>\n      \n      <div style={{ \n        flex: 1, \n        overflowY: 'auto', \n        padding: '8px',\n        maxHeight: '200px'\n      }}>\n        {messages.map((msg, index) => (\n          <div key={index} style={{ \n            marginBottom: '8px', \n            padding: '6px 8px',\n            backgroundColor: '#f8f9fa',\n            borderRadius: '4px',\n            fontSize: '14px'\n          }}>\n            <strong style={{ color: '#007bff' }}>{msg.user_name}:</strong>\n            <span style={{ marginLeft: '8px' }}>{msg.message}</span>\n            <div style={{ fontSize: '11px', color: '#666', marginTop: '2px' }}>\n              {new Date(msg.created_at).toLocaleTimeString()}\n            </div>\n          </div>\n        ))}\n        <div ref={messagesEndRef} />\n      </div>\n      \n      <form onSubmit={sendMessage} style={{ \n        padding: '8px', \n        borderTop: '1px solid #eee',\n        display: 'flex',\n        gap: '8px'\n      }}>\n        <input\n          type=\"text\"\n          value={newMessage}\n          onChange={(e) => setNewMessage(e.target.value)}\n          placeholder=\"Type a message...\"\n          disabled={loading}\n          style={{ \n            flex: 1, \n            padding: '6px 8px', \n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            fontSize: '14px'\n          }}\n          maxLength=\"500\"\n        />\n        <button \n          type=\"submit\" \n          disabled={loading || !newMessage.trim()}\n          style={{\n            padding: '6px 12px',\n            backgroundColor: '#007bff',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            fontSize: '14px'\n          }}\n        >\n          Send\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default TeamChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}